# Generated by Django 4.2.23 on 2025-12-15 05:04

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ("reports", "0129_dataset_month_field_dataset_year_field"),
    ]

    operations = [
        migrations.RemoveField(
            model_name="dataset",
            name="full_load_required",
        ),
        migrations.RemoveField(
            model_name="dataset",
            name="last_synced_number_of_records",
        ),
        migrations.RemoveField(
            model_name="dataset",
            name="update_frequency_days",
        ),
        migrations.AddField(
            model_name="dataset",
            name="data_update_frequency",
            field=models.ForeignKey(
                blank=True,
                help_text="Frequency of data updates for this dataset.",
                null=True,
                on_delete=django.db.models.deletion.SET_NULL,
                to="reports.period",
                verbose_name="Data Update Frequency",
            ),
        ),
        migrations.AddField(
            model_name="dataset",
            name="import_type",
            field=models.BooleanField(
                default=False,
                help_text="Indicates if dataset is fully loaded each time.",
                verbose_name="Full Load Required",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="active",
            field=models.BooleanField(
                default=True,
                help_text="Indicates if the dataset is active. Only active datasets will be imported and synchronized.",
                verbose_name="Active Dataset",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="add_time_aggregation_fields",
            field=models.BooleanField(
                default=False,
                help_text="Indicates if time aggregation fields (year, month, dayinyear, season) should be added.",
                verbose_name="Add Time Aggregation Fields",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="aggregations",
            field=models.JSONField(
                blank=True,
                default=list,
                help_text="List of aggregations to be applied to the if data frequency is > daily. Format: {'group_by_field: 'timestamp', 'target_field_name': 'date', 'parameters': [precipitation: ['sum'], 'temperature': ['min', 'max', 'mean']]}",
                null=True,
                verbose_name="Aggregations",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="base_url",
            field=models.CharField(
                help_text="base url for ODS-datasets.",
                max_length=255,
                verbose_name="Base URL",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="calculated_fields",
            field=models.JSONField(
                blank=True,
                default=list,
                help_text="List of fields to be calculated by the commnds defined in post_import_commands.",
                null=True,
                verbose_name="Calculated Fields",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="constants",
            field=models.JSONField(
                blank=True,
                default=list,
                help_text="List of constants to be added to the dataset. format: [{'field_name': 'station', 'type': 'int', 'value': 1}]. These constants will be added to each record during import.",
                null=True,
                verbose_name="Constants",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="db_timestamp_field",
            field=models.CharField(
                blank=True,
                help_text="Field in the database that contordering = ['title']  # or any other fieldains the timestamp.",
                max_length=255,
                null=True,
                verbose_name="Database Timestamp Field",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="delete_records_with_missing_values",
            field=models.JSONField(
                blank=True,
                default=list,
                help_text="List of fields for which records with missing values should be deleted.",
                null=True,
                verbose_name="Fields To Delete When Missing",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="description",
            field=models.TextField(
                blank=True,
                help_text="Description of the dataset.",
                verbose_name="Description",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="fields_selection",
            field=models.JSONField(
                blank=True,
                default=list,
                help_text="List of fields in the dataset to be imported. Empty list if all fields will be imported.",
                null=True,
                verbose_name="Imported Fields",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="import_filter",
            field=models.TextField(
                blank=True,
                help_text="Filter to be applied during import, e.g., 'temperature > 0'. If empty, no filter is applied.",
                null=True,
                verbose_name="Import Filter",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="last_import_date",
            field=models.DateTimeField(
                auto_now=True,
                help_text="Timestamp of the last import for this dataset.",
                null=True,
                verbose_name="Last Import Date",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="last_synced_date",
            field=models.DateField(
                blank=True, null=True, verbose_name="Last Synced Date"
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="month_field",
            field=models.CharField(
                blank=True,
                help_text="Name of the field representing the month in the dataset.",
                max_length=255,
                null=True,
                verbose_name="Month Field",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="name",
            field=models.CharField(
                help_text="Name of the dataset.",
                max_length=255,
                verbose_name="Dataset Name",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="post_create_sql_commands",
            field=models.TextField(
                blank=True,
                help_text="SQL commands to be executed after the initial table has been created.",
                null=True,
                verbose_name="Post Create SQL Commands",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="post_import_sql_commands",
            field=models.TextField(
                blank=True,
                help_text="SQL commands to be executed after each import process.",
                null=True,
                verbose_name="Post Import SQL Commands",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="record_identifier_field",
            field=models.CharField(
                blank=True,
                help_text="Field in the source dataset that uniquely identifies a record and increases with each import. if left empty, the entire daset will be imported each time, which is ok for smaller datasets where each record might change.",
                max_length=255,
                null=True,
                verbose_name="Record Identifier Field",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="slug",
            field=models.SlugField(
                blank=True,
                editable=False,
                null=True,
                unique=True,
                verbose_name="Dataset Slug",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="source",
            field=models.CharField(
                help_text="Source of the dataset, e.g., 'ods', 'worldbank",
                max_length=255,
                verbose_name="Dataset Source",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="source_identifier",
            field=models.CharField(
                help_text="Unique identifier for the source dataset.",
                max_length=255,
                verbose_name="Source Identifier",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="source_timestamp_field",
            field=models.CharField(
                blank=True,
                help_text="Field in the source dataset that contains the timestamp.",
                max_length=255,
                null=True,
                verbose_name="Source Timestamp Field",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="target_table_name",
            field=models.CharField(
                help_text="Name of the target table in the database.",
                max_length=255,
                verbose_name="Target Table",
            ),
        ),
        migrations.AlterField(
            model_name="dataset",
            name="year_field",
            field=models.CharField(
                blank=True,
                help_text="Name of the field representing the year in the dataset.",
                max_length=255,
                null=True,
                verbose_name="Year Field",
            ),
        ),
    ]
